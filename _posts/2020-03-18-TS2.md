---
title: (강의) 시계열 2주차 보충자료 
layout: post
---

### 확률변수 

- 확률변수는 $X$는 $X:\Omega \to \mathbb{R}$인 함수이다. 그런데 조금 **특별한 성질**을 가진 함수이다. 우선 이 특별한 성질에 대해서는 제쳐두고 단순히 $\Omega$의 각 원소에 실수값을 맵핑한 규칙이라고 이해해도 괜찮다. 

- (예제1) 동전을 던지는 예제를 다시 생각하자. 
\begin{align}
\Omega=\\{H,T\\}
\end{align}
공평한 동전이라면 동전이 앞면이 나올 확률, 뒷면이 나올 확률을 아래와 같이 정의할 수 있다. 
\begin{align}
P(\\{H\\})=P(\\{T\\})=\frac{1}{2}
\end{align}
여기에서 $\Omega$의 원소 $H$, $T$를 각각 $0$과 $1$로 정의한다면 이는 확률변수가 된다. 즉 함수 $X:\Omega \to \mathbb{R}$를 아래와 같이 정의하면 
\begin{align}
X(H)=0 
\end{align}
\begin{align}
X(T)=1 
\end{align}
$X$는 확률변수가 된다. 집합 $A$의 원소를 $a$로 표시하는 것처럼 종종 $\Omega$의 원소를 $\omega$로 표시한다. 예를들면 $\Omega=\\{H,T\\}=\\{\omega_1,\omega_2\\}$와 같이 쓸 수 있다. 이 경우 확률변수는 
\begin{align}
X(\omega_1)=0 
\end{align}
\begin{align}
X(\omega_2)=1 
\end{align}
와 같이 정의할 수 있다. 

- 확률변수 $X$가 $X: \Omega \to \mathbb{R}$인 함수라면 확률 $P$는 $P:{\cal F} \to [0,1]$인 함수이다. 확률의 정의역이 ${\cal F}$라는 의미를 잘 생각해보면 확률은 집합을 실수로 맵핑하는 함수가 된다. 즉 set function이 된다. 반대로 확률변수는 집합의 원소를 실수로 맵핑하는 함수이다. 따라서 아래와 같은 기호를 쓴다. 
\begin{align}
X(H)=0
\end{align}
\begin{align}
P(\\{H\\})=\frac{1}{2} 
\end{align}
\begin{align}
P(\\{\omega_1\\})=\frac{1}{2}
\end{align}
즉 아래와 같이 표현하면 옳지 않다. 
\begin{align}
P(H)=\frac{1}{2} 
\end{align}
\begin{align}
P(\omega_1)=\frac{1}{2}
\end{align}
첫 번째 표현은 $H$자체를 집합으로 착각하여 생기는 혼란이다. 보통 확률을 표현할때 "집합 $A$에 대하여 집합 $A$가 발생할 확률을 $P(A)$라고 하자."는 식의 표현을 많이 접했을 것이다. $P(A)$에서 $A$는 엄연히 집합이지만 $H$는 집합이 아니다. 두 번째 표현은 첫번째 표현과 같은 이유로 틀린 표현이다. 

- 하지만 아래와 같은 표현은 옳다. 
\begin{align}
P(X=1)=\frac{1}{2}
\end{align}
언뜻보기에는 이렇게 생각할 수 있다. (1) 원래 $P$는 set function이므로 입력으로 집합을 받아야 한다. (2) 그런데 $X=1$는 집합이 아니라 수식이다. (3) 따라서 옳지않다. 이런 따짐은 옳다. 하지만 $P(X=1)$은 관용적으로 많이 쓰는데 그 이유는 $P(X=1)$을 아래와 같은 표현의 생략이라고 보기 때문이다. 
\begin{align}
P(\\{H\\})=P(\\{\omega: X(\omega)=1\\})=\frac{1}{2}
\end{align}
확률을 $P(\\{\omega: X(\omega)=1\\})$와 같은 표현하는 것은 명확하지만 너무 복잡하고 직관적이지 않다. 그래서 간단히 $P(X=1)$와 같이 쓴다. 이는 매우 관용적인 약속이다. 

- 확률변수는 매우 편리한 도구이므로 앞으로는 확률을 표현할때 
\begin{align}
P(\\{H\\})=P(\\{T\\})=\frac{1}{2}
\end{align}
라든가 
\begin{align}
P(\\{\omega_1\\})=P(\\{\omega_2\\})=\frac{1}{2}
\end{align}
와 같이 표현하는 일은 거의 없을 것이다. 대신에 아래와 같이 표현하는 일이 많이 생길것이다. 
\begin{align}
P(X=0)=P(X=1)=\frac{1}{2}
\end{align}

- 확률변수가 단지 함수라는 것은 쉽게 납득이 되지 않는다. 왜냐하면 대부분의 사람들이 "확률변수=값이 랜덤하게 바뀌는 변수"의 느낌을 가지기 때문이다. 즉 (1) 확률변수는 변수이고 (2) 확률변수는 결과가 랜덤하게 바뀌어야 한다고 대부분 생각한다. 

- (1)을 좀 더 자세히 설명하여 보자. 보통 우리가 함수라는 표현을 쓸때 $y=f(x)$라는 기호로 많이 쓴다. 여기에서 $f$는 함수 즉 ***function***이라고 하고 $x$를 ***input*** 이라고 부르고 $y$ 혹은 $f(x)$를 ***output***이라 부르기로 약속하자. 이때 input과 output이 엄밀히 정의된 용어는 아니지만 편의상 이렇게 부르기로 하자. 랜덤변수 $X$가 함수라는 의미는 랜덤변수 $X$에 대응하는 요소가 $f$라는 것이다. 따라서 $y=f(x)$에 대응하는 표현은 $x=X(\omega)$와 같이 된다. 여기에서 $\omega$를 ***outcome***이라고 부르고 $x$를 ***realization***이라고 부른다. 

- (2)를 살펴보자. 확률변수의 결과 즉 ***output***이 랜덤으로 바뀐다는 말은 동일한 ***input***에 대한 맵핑의 결과 ***output***이 랜덤으로 바뀐다는 것처럼 오해할 수 있다. 하지만 이는 사실이 아닌데 확률변수는 단지 
\begin{align}
X(\omega_1)=0 
\end{align}
\begin{align}
X(\omega_2)=1 
\end{align}
와 같은 맵핑규칙일 뿐이기 때문이다. 보는 것처럼 입력이 $\omega_1$이면 항상 $0$이 출력되고 입력이 $\omega_2$면 항상 $1$이 출력된다. 확률변수가 가지는 "랜덤한"느낌은 입력이 랜덤으로 바뀔 수 있기 때문이지 입력과 출력사이의 맵핑을 정의하는 규칙이 랜덤으로 바뀌는 것은 아니다. 즉 ***outcome***이 랜덤으로 나올수 있기 때문이지 ***realization***이 랜덤으로 나올 수 있는 것은 아니다. 

- 많은 사람들이 아래와 같은 표현 때문에 혼돈을 느낀다. 예제1의 확률변수 $X$를 아래와 같이 표현할 수 있다. 
\begin{align}
X=\begin{cases}
0 & w.p.~ \frac{1}{2} \\\\ \\
1 & w.p.~ \frac{1}{2}
\end{cases}
\end{align}
이 표현을 보면 마치 $X$가 함수가 아닌 변수처럼 느껴지고 그 값이 랜덤으로 바뀌는 것처럼 느껴진다. 놀랍게도 이 표현은 맞는 표현인데 사실 아래와 같은 표현이 간소화 된 표현이기 때문이다. 
\begin{align}
X(\omega)=\begin{cases}
0 & \omega \in \\{H\\}\\\\ \\
1 & \omega \in \\{T\\}
\end{cases}, \quad \mbox{ where } P(\\{H\\})=P(\\{T\\})=\frac{1}{2}. 
\end{align}

- 확률변수 $X$는 확률과 직접적으로는 관련이 없지만 간접적으로는 관련이 있다. 왜냐하면 확률변수 $X$의 역상(inverse image)이 $\Omega$의 부분집합이 되는데, $\Omega$의 부분집합에서는 확률을 정의할 수 있기 때문이다. 그렇다면 <br/><br/>
***확률변수의 $X$의 모든 역상에 대하여 확률을 모순없이 정의할 수 있을까?***<br/><br/>
와 같은 질문을 할 수 있다. 

- 예제2를 다시 생각하여보자. 이전에는 논의를 편하게 하기 위해서 sample space를 아래와 같이 정의하였다. 
\begin{align}
\Omega=[0,2\pi)
\end{align}
사실 동전예제와 맞춰서 생각해보면 sample space는 
\begin{align}
\Omega=\\{\dots,\mbox{3시},\dots,\mbox{6시},\dots,\\}
\end{align}
이고 확률변수는 
\begin{align}
\dots 
\end{align}
\begin{align}
X(\\{\mbox{3시}\\})=\pi/2 
\end{align}
\begin{align}
\dots
\end{align}
\begin{align}
X(\\{\mbox{6시}\\})=\pi
\end{align}
\begin{align}
\dots
\end{align}
와 같이 정의해야 한다. 따라서 사실 이전의 예제에서는 확률변수의 **realization**들의 집합자체를 $\Omega$로 정의한 셈이 된다. 따라서 이 경우 확률변수는 항등함수로 정의한 셈이 된다. 즉 $X$는 
\begin{align}
X:[0,2\pi) \to [0,2\pi)
\end{align}
인 항등함수이다. $X$는 항등함수이므로 비탈리집합 $V$에 대한 $X$의 역상은 비탈리 집합이 된다. 그런데 비탈리집합은 잴 수 없는 집합이므로 확률을 정의할 수 없다. 따라서 $X$의 모든 역상에 대해서 확률을 모순없이 정의할 수 있는 것은 아니다. 

- 확률변수인데 확률을 정의하지 못하는것은 말이 되지 않으므로 확률변수의 정의를 조금 수정해보자. 수정은 매우 간단한데 확률변수 $X$의 역상이 잴 수 있는 집합만 나오도록 수정하면 된다. 결국 $X$가 가측함수(measurable function)이라는 것이 되면 이것이 가능해지는데 가측함수에 대한 자세한 내용은 이 강의의 범위를 넘어서므로 생략한다. 하지만 핵심은 파악할 수 있는데 바로 가능한 $X$의 역상이 ${\cal F}$의 원소가 되어야 한다는 것이다. (앞서서 확률변수 $X$는 조금 **특별한 성질**이 있는 함수라고 소개하였는데, 이 **특별한 성질**이 바로 $X$가 가측함수라는 것이다.) 결국 <br/><br/>
***확률변수의 $X$의 모든 역상에 대하여 확률을 모순없이 정의할 수 있다.***<br/><br/>
는 맞는 주장인데 이는 위의 주장이 성립하도록 우리가 $X$를 일반적인 함수가 아니라 **특별한 성질**을 가지는 함수로 재정의 하였기 때문이다. 

---

### 시계열  

- 확률변수는 $X$는 $X:\Omega \to \mathbb{R}$를 만족하고 추가로 **특별한 성질**을 가진 함수라고 생각할 수 있다. 이를 확장하면 아래와 같이 확률벡터를 정의할 수 있다. 

- 확률벡터 ${\boldsymbol X}$는 
\begin{align}
{\boldsymbol X}:\Omega \to \mathbb{R}^m
\end{align}
를 만족하고 추가로 **특별한 성질**을 가진 함수이다. 

- 기호는 아래와 같이 쓸 수 있다. 
\begin{align} 
\mbox{확률변수}: X(\omega)=x 
\end{align}
\begin{align} 
\mbox{확률벡터}: {\boldsymbol X}(\omega)=(x_1,x_2,\dots,x_m)
\end{align}
여기에서 확률벡터 ${\boldsymbol X}$가 볼드체인 이유는 realization이 스칼라가 아니라 벡터임을 강조하기 위해서이다. 

- 확률벡터는 확률변수들의 모임으로 해석할 수 있다. 즉 
\begin{align}
{\boldsymbol X}=(X_1,X_2,\dots,X_m)
\end{align}
와 같이 해석할 수 있다. 앞서서 $X(\omega)=x$ 와 같은 표현을 소개하였는데 이에 대응하는 확률벡터버전은 아래와 같다. 
\begin{align}
{\boldsymbol X}(\omega)=(X_1,X_2,\dots,X_m)(\omega)=(X_1(\omega),X_2(\omega),\dots,X_m(\omega))=(x_1,x_2,\dots,x_m)
\end{align}

- 이 표현을 이해하는 것은 생각보다 쉽지 않다. 위의 기호중에서 가장 이해하기 쉬운것은 $(x_1,\dots,x_m)$이다. 시계열수업임을 감안하여 이를 해석해보도록 하자. 예를 들면 아래와 같이 해석할 수 있다. 
\begin{align}
x_1=\mbox{2019-03-20, 삼성전자의 주식값} 
\end{align}
\begin{align}
x_2=\mbox{2019-03-21, 삼성전자의 주식값} 
\end{align}
따라서 
\begin{align}
x_1,\dots,x_m
\end{align}은 삼성전자 주식의 주가를 2019년 3월20일부터 순서대로 $m$개 나열한 수열이라 볼 수 있다. 또한 $(x_1,\dots,x_m)$는 위의 수열의 원소를 모두 모아 벡터로 만든것이라 생각할 수 있다. 

- 이제 $X_1(\omega)=x_1, \dots, X_m(\omega)=x_m$ 라고 표현할 수 있음을 주의하자. $\omega$만 알면 맵핑규칙에 따라 $x_1,\dots,x_m$는 자동으로 결정된다. 그렇다면 여기에서 $\omega$란 무엇일까? 

- 가능한 설명모형은 아래와 같다. <br/><br/>
**(1) 14,000,605개의 평행세계가 있다고 가정하자.** <br/>
**(2) 우리는 이중에 하나의 평행세계에 $\frac{1}{14,000,605}$의 "확률"로 선택되어져 살고 있다고 생각하자.** <br/><br/>
확률이라는 용어가 나온김에 좀 더 엄밀하게 정의해보자. 각 평행세계를 $\omega_1,\dots,\omega_{14,000,605}$라고 정의하면 
\begin{align}
\Omega=\\{\omega_1,\dots,\omega_{14,000,605}\\}
\end{align}
이고 
\begin{align}
P(\\{\omega_1\\})=\dots=P(\\{\omega_{14,000,605}\\})=\frac{1}{14,000,605}
\end{align}
가 된다. 이제 다시 아래를 가정하자. <br/><br/>
**(3) 하나의 평행세계가 결정되면 그 평행세계에 해당하는 모든 사건들이 이미 결정되어 있다.** <br/><br/> 
가령 우리가 777번째 해당하는 평행세계로 선택되어 살고 있다고 하자. 즉 $\omega=\omega_{777}$이다. 삼성전자의 주식은 맵핑규칙 $X$에 따라 자동으로 
\begin{align}
x_1=X_1(\omega_{777})\dots,x_m=X_m(\omega_{777})
\end{align}
와 같이 결정된다는 의미이다. 

- 이를 받아 들일 수 없는 사람도 있을 텐데 이는 미래가 고정되지 않고 불확실하다고 생각하기 때문이다. 예를들어 $m$시점의 삼성전자 주가가 $x_m=45,400$원이라고 가정하자. 그렇다면 다음날 삼성전자 주가 $x_{m+1}$은 $38,590\sim 52,210$ 사이의 어떤 값이다. 주가의 최소단위는 1원 단위이므로 삼성전자 주가를 기준으로 보면 내일은 총 $52,210-38,590=13,620$개의 새로운 미래가 가능하다. 미래는 언제가 열려있기에 하나의 평행세계가 결정된다고 그 다음을 항상 예측할 수 있는 것은 아니라 주장할 수 있다. 

- 이는 관점의 차이인데 어차피 두 관점은 같다. 왜냐하면 위의 주장은 다시 처음부터 
\begin{align}
14,000,605 \times 13,620
\end{align}
개의 평행우주를 고려했다고 생각하면 해결된다. 즉 $m$개의 삼성전자 주가를 모두 파악하기 위해 $14,000,605$의 평행우주를 고려했고 다시 $m+1$의 삼성전자 주가를 모두 $14,000,605\times 13,620$개의 평행우주를 고려했다고 주장하면 된다. 평행우주의 수는 편의에 따라 무한히 늘릴 수 있다. 

- 다시 본론으로 돌아오자. 아래과 같이 표현할 수도 있다. 
\begin{align}
X_m(\omega)=X(\omega,m)
\end{align}
예를들어 777번째 평행우주에서 시점 $m=5$에 해당하는 삼성전자 주가는 
\begin{align}
X_5(\omega_{777})=X(\omega_{777},5)
\end{align}
와 같이 정의할 수 있다. 

- 확률변수는 $\Omega$의 원소 $\omega$에 하나의 실수값이 대응한다. 하지만 확률벡터는 원소 $\omega$에 두 개 이상의 실수값이 대응한다. 상상력을 발휘하면 하나의 원소 $\omega$에 무한개의 실수값을 대응시키는 어떠한 존재를 생각할 수 있다. 즉 하나의 원소 $\omega$에 대응하는 realization이 함수인 경우를 상상할 수 있다. 이를 확률과정이라고 한다. 확률과정은 아래와 같이 표현할 수 있다. 
\begin{align}
X(\omega,t)=x(t)
\end{align} 
즉 $x(t)$는 고정된 $\omega$에 대한 realization이다. 이를 특별히 sample path 혹은 sample function이라고 부른다. $X(\omega,t)$는 상당히 오묘한데 $t$를 fix하면 확률변수가 되고 $\omega$를 fix하면 sample path가 된다. 확률변수를 나타낼때 $X(\omega)$를 줄여서 $X$로 표현하듯이 확률과정을 나타낼때에도 $X(\omega,t)$를 줄여 간단히 $X(t)$라고 쓴다. 

- 교재의 표현을 정리하면 아래와 같다. <br/><br/>
**(1) 확률과정(stochastic process):** <br/>
**(2) 확률법칙(probability law):** <br/>
**(3) 확률공간(probability space):** <br/>
**(4) 확률변수(random variable):** <br/>
**(5) 확률변수들의 모임(random vector,stochastic process):** <br/>
**(6) 집합 $T$(index set):** <br/>
**(7) 연속형 확률과정:** <br/>
**(8) 이산형 확률과정:** <br/>
**(9) 실현값(realization):** <br/>
**(10) 표본통로(sample path):** <br/><br/>
교재의 표현중 "우리가 만일 과거로 돌아갈 수 있어 반복관측을 할 수 있다면 현재 관측된 시계열은 무한히 많이 관측 가능한 확률변수들의 모임 중에서 특별히 실현된 하나에 해당할 것이다." 의 의미는 "우리가 임의의 평행세계 중 하나로 자유롭게 이동할 수 있어 각 평행세계에서 시계열을 반복관측 할 수 있다고 하자. 그렇다면 현재 우리가 세계에서 관측된 시계열은 무한히 많은 평행세계 중 특별히 실현된 하나에 해당할 뿐이다." 라는 의미이다. 또한 교재의 표현 중 "지구과학에서 다루는 확률과정에서의 집합 $T$처럼 지구표현의 위치 또는 어느 지역의 위치 등을 나타내는 위치의 집합인 경우" 는 index set $T$가 아래와 같이 시간순서로 나열된것이 아니라 
\begin{align}
T=\\{\mbox{2019-03-20},\mbox{2019-03-21},\dots, \\}
\end{align}
아래와 같이 공간의 어떤 위치로 나열된 경우를 의미한다. 
\begin{align}
T=\\{\mbox{(위도 30, 경도 29)},\mbox{(위도 41, 경도 30)},\dots, \\}
\end{align}
시계열은 자료가 가까운 시간끼리 상관관계가 있는 것처럼, 지구과학에서 다루는 자료는 가까운 공간끼리 상관관계가 있다. 예를들어 2019-03-20의 삼성전자 주식값과 2019-03-21의 삼성전자 주식값은 서로 연관이 있는것 처럼 (위도 30, 경도 29) 에서의 기온과 (위도 30, 경도 28) 에서의 기온도 서로 연관이 있다. 

--- 

### 정상성 

- $X(t)$, $X_t(\omega)$, $X(\omega,t)$, $X(\omega; t)$, $X(t;\omega)$, $\\{X(\omega,t): t \in T\\}$, $\\{X(\omega,t)\\}$ 를 확률과정이라고 하자. 만약에 여러 $\omega$를 고려하면 여러 뭉치의 sample path가 얻어진다. 그럼 모든 $\omega$에 대하여 가능한 sample path를 모두 모은 집합을 생각할 수 있는데 이러한 집합을 앙상블(**ensemble**)이라고 한다. 즉 앙상블은 아래처럼 각 원소가 함수인 집합이다. 
\begin{align}
\Big\\{ \\{X(\omega_1,t): t \in T\\},\\{X(\omega_2,t): t \in T\\}, \dots \Big\\}
\end{align}
\begin{align}
\Big\\{ X(\omega_1,t),X(\omega_2,t), \dots \Big\\}
\end{align}
\begin{align}
\Big\\{X(\omega_1,t) ,X(\omega_2,t), \dots \Big\\}
\end{align}

- 각 평행세계 $\omega_1,\omega_2,\dots$ 를 자유롭게 선택하여 관측할 수 있는 존재를 상상하자. 편의상 이러한 존재를 **"신**이라고 부르자. 이 신이 $\omega_1,\dots,\omega_{776}$개의 평행우주에 대하여 삼성전자 주식을 모두 관측하였다고 하자. 하지만 신은 우리가 살고 있는 평행우주 (예를들면 $\omega_{777}$) 에 대한 결과는 아직 관측하지 않았다고 하자. 이 존재에게 $m$시점의 삼성전자 주식이 얼마냐고 묻는다면 신은 뭐라고 대답할까? 아마도 776개의 평행우주에서 관측한 삼성전자 주식의 값을 평균내서 대답할 것이다. 즉 아래와 같이 추론할 것이다. 
\begin{align}
\mbox{예측값} = \frac{1}{776}\sum_{i=1}^{776} X(\omega_i,m)
\end{align}
이 추론은 매우 합리적이다. 그리고 이 추론은 신이 더 많은 평행세계를 관측할수록 정확도가 올라간다. 만약에 신이 가능한 모든 앙상블을 관측하여 $m$시점의 삼성전자 주식값을 평균냈다고 하자. 이 값을 $m$시점의 ***ensemble average***라 부른다. 시점 $m$의 앙상블평균이 거창하게 들릴 수 있겠지만 단순히 아래와 같다. 
\begin{align}
E(X_m)=\int_{\omega \in \Omega}X_m(\omega)dP=\int_{-\infty}^{\infty}x_mf(x)dx
\end{align}
가운데 표현은 우선 무시하자. 여기에서 $f(x)$는 확률변수 $X_m$의 ***pdf***이다. 

- 우리의 목표는 결국 $E(X_m)$을 추론하는 것이다.