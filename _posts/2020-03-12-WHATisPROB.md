---
layout : post 
title : (정리) 확률 
---

### About this doc 
- 이 포스팅에서는 확률을 정의하는 방법에 대하여 다룬다. 

### 확률

- (예제1) 동전을 던지면 앞면과 뒷면 중 하나가 나오게 될것이다. 앞면이 나오는 경우를 $H$라고 하고 뒷면이 나오는 경우를 $T$라고 하자. 그리고 모든 경우를 모은 집합을 $\Omega$와 같이 정의하고, 이것을 sample space라고 부르자. 즉 sample space $\Omega$는 아래와 같이 정의한다. 
\begin{align}
\Omega=\\{H,T\\}
\end{align}
공평한 동전이라면 동전이 앞면이 나올 확률, 뒷면이 나올 확률을 아래와 같이 정의할 수 있다. 
\begin{align}
P(\\{H\\})=P(\\{T\\})=\frac{1}{2}
\end{align}

- (예제2) sample space의 원소수가 유한이 아니라 무한개인 경우도 생각할 수 있다. 예를들어 시계바늘을 돌려서 시계바늘이 가르키는 시간을 sample space로 정의할 수 있다. 다만 시계바늘이 가리키는 시간은 시계바늘이 12시와 이루는 각도와 1:1 관계가 있으므로 $\Omega$를 아래와 같이 편리하게 정의할 수 있다. 
\begin{align}
\Omega=[0,2\pi)
\end{align}
여기에서 $0$은 바늘이 12시를 가리키는 사건 $\pi$는 6시를 가리키는 사건을 의미한다. 이 경우 sample space의 각 부분집합에 $\Omega^{* }$ 대한 확률은 아래와 같이 기하학적 확률 (즉 길이의 비율) 로 정의할 수 있다. 
\begin{align}
P(\Omega^* )=\frac{m(\Omega^* )}{m(\Omega)}
\end{align}
여기에서 $m$은 구간의 길이를 반환하는 함수이다. (사실 이 함수는 measure이다. 하지만 측도론(혹은 실변수함수론이라고도 불림)을 배우지 않았다면 단순히 길이를 반환하는 함수라고만 생각하자.) 예를들어 
\begin{align}
m([0,2\pi))=2\pi \\\\ \\
m([0,\pi))=\pi 
\end{align}
와 같이 계산할 수 있다. 그럼 연습삼아 $\Omega^* = [0,\pi)$와 경우의 확률을 계산하여 보자. 사건 $\Omega^* = [0,\pi)$는 ''시계바늘이 12시와 6시 사이를 가리키는 사건들의 집합''으로 해석할 수 있는데 이 확률은 아래와 같이 계산할 수 있다. 
\begin{align}
P(\Omega^* )=\frac{m(\Omega^* )}{m(\Omega)}=\frac{m([0,\pi))}{m([0,2\pi))}=\frac{1}{2}
\end{align}
이러한 확률은 잘 정의되는것 처럼 보인다. 


- 하지만 확률을 잘 정의하는 것은 생각보다 쉽지가 않다. 왜냐하면 확률을 잘 정의하기 위해서는 <br/><br/>
**Sample space $\Omega$의 모든(=임의의) 부분집합 $\Omega^* $에 대하여 $P(\Omega^* )$를 명확하고 모순없이 정의해야**<br><br/>
하는데 이것은 생각보다 쉬운일이 아니다. 또한 정의한 확률은 확률의 공리를 적용하였을때 모순이 없어야 한다. 확률의 공리는 간단하게 말하면 (1) 모든 확률은 0보다 크며 (2) 전체사건이 일어날 확률은 1이고 (3) 서로소인 사건에 대하여 $\sigma$-additive 가 성립해야 한다. 확률의 공리에 대한 좀더 정확한 state는 김우철 수리통계교재 혹은 위키피디아를 참고하여 스스로 확인해 보길 바란다. 

- 확률의 공리는 너무 당연해서 확률을 정의하면 저절로 성립할것 같다. 하지만 예제2의 경우 그렇게 당연하지 않다. 이에 대하여 좀 더 자세히 살펴보자. 예제2에서는 $\Omega=[0,2\pi)$라고 생각하고 확률은 길이의 비율로 정의하였다. 예를들어서 $\Omega^* \in [0,\pi)$일 확률은 
\begin{align}
\frac{\pi}{2\pi}=\frac{1}{2}
\end{align}
와 같은 식으로 정의한바 있다. 이런식의 정의는 여러가지 도전적인 질문에 직면한다. 

- (질문1) 첫번째 도전적인 질문은 아래와 같다.  <br/><br/>
**$\Omega^* =\\{0\\}$일 확률이 얼마인가?** <br/><br/>
즉 바늘침이 정확하게 12시를 가르킬 확률이 얼마냐는 것이다. 한 점으로 이루어진 집합 $\\{0\\}$은 분명히 $\Omega=[0,2\pi)$의 부분집합 이므로 앞서 논의한대로라면 이러한 집합에 대한 확률을 **명확하게, 모순없이** 정의할 수 있어야 한다. 많은 사람들이 이 질문에 대한 답은 $0$ 이라고 알고 있고 그 이유를 ''점의 길이는 0 이니까'' 라고 이해하고 있다. 그럼 이제 아래의 질문을 생각하여 보자. 

- (질문2) 두번째 질문은 아래와 같다. <br/><br/>
**그렇다면 사건 $\\{0,1\\}$가 일어날 확률은 얼마인가?** <br/><br/>
이다. 이 질문에 대한 대답은 $0+0=0$이므로 $0$이라고 주장할 수 있다. 그렇다면 이제 아래의 질문을 생각해보자. 

- (질문3) 세번째 질문은 아래와 같다. <br/><br/>
**구간 $[0,2\pi)$는 무수히 많은 점들이 모여서 만들어지는 집합이다. 그런데 점하나의 길이는 0이다. 0을 무수히 더해도 0이다. 그러므로 구간 $[0,2\pi)$의 길이도 0이 되어야 한다. 이것은 모순아닌가?** <br/><br/>
이 질문에 대한 답변은 쉽지 않다. 왜냐하면 $m([0,2\pi))=0$ 임을 인정하면 지적한대로 전체확률은 1이어야 한다는 기본상식에 어긋나 모순이 생긴다. 확률의 공리가 깨져버리는 것이다. 하지만 이 질문에 대한 논리는 그럴듯해 보인다. 따라서 이 질문에 대한 대답을 하려면 약간의 직관적인 가정을 덧붙여야 한다. 예를들면 ''점들을 유한번 합치면 그냥 많은 점들이지만 무한히 합치면 이것은 선분이 된다. 따라서 길이가 생긴다.'' 라는 식으로 설명할 수 있다. 

- (질문4) 그렇다면 아래의 질문은 어떻게 대답할 수 있을까? <br/><br/>
**$[0,2\pi)$ 에서 유리수만 뽑아낸 집합이 있다고 생각하자. 이 집합은 분명히 무한개의 점을 포함하고 있다. 그렇다면 이 집합도 길이가 있는가? 있다면 얼마인가?** <br/><br/>
이미 점들의 길이를 무한번 더하면 길이가 생긴다고 주장한 상태이므로 길이가 0이라고 주장할 수 없다. 따라서 길이가 있다고 주장해야 한다. 단순히 길이가 $2\pi$라고 주장한다면 바로 모순에 빠짐을 알 수 있다. (길이가 $2\pi$라고 주장한다면 $[0,2\pi)$ 에서 무리수만 뽑아낸 집합의 길이가 뭐냐고 따질수가 있음.) 길이는 일단 0보다 커야하고 $2\pi$보다 작아야함은 자명하므로 그 사이에 있는 어떤 값이 길이라고 주장하자. (구체적으로 어떤값인지는 모른다고 하자.) 따라서 (질문4)에 대한 답은 ''구체적으로 얼마인지는 모르겠지만 길이가 분명 존재하고 그 길이는 0 보다 크고 $2\pi$ 보다는 작은 어떠한 값 $a$이다.'' 정도로 정리할 수 있다. 하지만 이 주장은 결국 모순에 빠지게 된다. 

- (질문5) 모순에 빠지는 이유는 아래와 같은 질문을 할 수 있기 때문이다. <br/><br/>
**$[0,\pi)$ 에서 유리수만 뽑아낸 집합이 있다고 하자. 이 집합을 편의상 $B$ 라고 정의하자. 이 집합을 $\pi/2$만큼 평행이동 시킨 집합을 $B'$라고 하자. $B$의 모든 원소는 유리수인데 $B'$의 모든 원소는 무리수이다. 따라서 두 집합사이의 교집합은 없다. 따라서 $B \cup B'$의 길이는 각 집합의 길이를 더한것과 같다. 그런데 $B'$는 단순히 $B$를 평행이동한것일 뿐이므로 두 집합의 길이는 같다. 그리고 집합 $B$는 앞에서 질문했던 집합 $A$의 절반에 해당한다고 볼 수 있으므로 집합 $B$의 길이를 $b=a/2$와 같이 볼 수 있을 것이다. 집합 $B$의 길이를 $b$라고 한다면 집합 $B \cup B'$의 길이는 $2b$이라고 주장할 수 있다. 그런데 상식적으로 생각해보면 $B \cup B'$의 길이는 $1.5b$가 되어야 함을 알 수 있다. 그렇다면 도데체 $B \cup B'$의 길이는 얼마인가?** <br/><br/>
이 질문은 지금까지 제시한 논리로 방어가 불가능하다. 이처럼 논리적인 모순없는 체계를 만드는 것은 매우 어려운 일이다. 

- 결론적으로 말하면 길이를 재는 함수 $m$을 아래와 가정하면 위의 모든 질문에 대한 대답을 논리적 모순없이 설계할 수 있다. <br/><br/> 
(i) 한 점에 대한 길이는 $0$ 이다. <br/>
(ii) $[0,2\pi)$ 사이의 모든 유리수를 더한 집합은 그 길이가 $0$이다. <br/>
(iii) $[0,2\pi)$ 사이의 모든 무리수를 더한 집합은 그 길이가 $2\pi$이다. <br/><br/> 
좀 더 구체적으로 말한다면 르벡측도(Lebesgue measure)를 사용하면 된다. 르벡측도에 대한 자세한 개념은 측도론교재를 참고하길 바란다. 

- 그렇다면 아래와 같이 주장할 수 있을까? <br/><br/>
**위의 3가지 원리 (i)-(iii)을 사용하면 $[0,2\pi)$의 어떤 부분집합에 대하여서도 그 집합의 길이를 모순없이 정의할 수 있다.**
<br/><br/>
결론적으로 말하면 이 주장은 틀렸다. 

- 이 주장이 틀린이유를 설명하겠다. 이 주장이 틀린 이유는 <br/><br/>
**위의 3가지 원리 (i)-(iii)을 사용하여도 길이를 모순없이 정의불가능한 어떠한 집합이 $[0,2\pi)$내에 존재하기 때문** <br/><br/>
이다. 이제 이러한 집합이 무엇인지 살펴보겠다. 먼저 아래와 같은 관계를 정의하자. <br/><br/>
***두 실수 $x,y$에 대하여  $x-y \in \mathbb{Q}$ 이면 $x\sim y$ 라고 정의한다.***<br/><br/>
이러한 관계를 동치관계라고 한다. **참고로 어떤 집합 (여기에서는 $[0,2\pi)$ 임) 내의 원소간 동치관계가 존재하면 그 동치관계를 이용하여 $[0,2\pi)$의 파티션을 항상 만들 수 있다.** <br/>
***(proof)***
임의의 실수 $x \in [0,2\pi)$에 대하여 동치관계가 성립하는 실수들을 모은 집합을 $[x]$라고 정의하자. 즉 
\begin{align}
[x]=\\{y: x\sim y, y \in \mathbb{R}\\} \cap [0,2\pi)
\end{align}
이다. 여기에서 $[x]$를 equivalence class라고 한다. 그런데 아래가 항상 성립한다. 
\begin{align}
[0,2\pi) \subset \bigcup_{x\in [0,2\pi)}[x]
\end{align}
그리고 아래가 성립한다. 
\begin{align}
[0,2\pi) \supset \bigcup_{x\in [0,2\pi)}[x]
\end{align}
따라서 아래가 성립한다. 
\begin{align}
[0,2\pi) = \bigcup_{x\in [0,2\pi)}[x]
\end{align}
그리고 아래의 관계도 성립한다. 
\begin{align}
[x]\neq[y] \Longrightarrow [x] \cap [y] = \emptyset 
\end{align}
따라서 $[0,2\pi)$의 파티션이 존재한다. 
\begin{align}
[0,2\pi)=\bigcup_ {t\in {\cal T} }A_t
\end{align}
여기에서 $A_t=\\{s: t-s \in \mathbb{Q} \\} \cap [0,2\pi)$ 이고 $t$는 각 파티션을 대표하는 원소라고 하자. 그리고 ${\cal T}$는 단순히 대표원소들의 집합이라고 하자. 

- 이제 이 파티션에서 원소를 하나씩만 선택하여 어떤 집합 $V$를 만들었다고 하자. 그럼 이 집합은 (i)-(iii)의 원리에 의해서도 길이를 잴 수 없다. 이제부터 왜 $V$가 잴수없는 집합인지 설명하겠다. 우선 $V$가 잴수있는 집합이라고 하자. 즉 집합 $V$의 길이를 잴 수 있고 그 길이를 $a$이라고 하자. 즉 $m(V)=a$이라고 가정하자. 여기에서 $m$은 르벡메져이다. 그리고 아래의 집합들을 정의한다. <br/><br/>
**1. $(-2\pi,2\pi)$에서 유리수만 모은 집합을 $Q^{\star}$라고 정의하자. 즉 $Q^{\star}=\mathbb{Q} \cap (-2\pi,2\pi)$이다.**<br/>
**2. $Q^{\star}$에서 적당한 유리수 하나를 뽑아서 $V$를 평행이동 시킨 집합 $V_q$를 정의하자.** <br/><br/> 
이때 위에서 언급합 $V_q$는 좀 더 형식적으로 쓰면 $V_q:=\\{v+q: v\in V, q\in Q^{\star} \\}$와 같이 쓸 수 있다. 이 집합 $V_q$는 매우 오묘한 특징이 있는데 우선 아래들이 성립한다. <br/><br/>
(1) $V_q$의 길이는 $V$의 길이와 같다. <br/>
(2) 서로 다른 $q_1,q_2 \in Q^{\star}$에 대하여 $V_{q_1} \cap V_{q_2} = \emptyset$ 이 성립한다. <br/><br/>
이제 이러한 집합 $V_q$를 가지고 아래의 성질이 성립함을 보이자. 
\begin{align}
\mbox{Fact 1: } [0,2\pi) \subset \bigcup_{q \in Q^{\star} } V_q.
\end{align}
***(proof)*** 증명이 그렇게 어렵진 않다. $x \in [0,2\pi)$ 라고 하자. 그런데 $[0,2\pi)=\bigcup_{t \in {\cal T} }A_t$ 이므로 $x\in A_{t'}$가 성립하는 $t'$가 적어도 하나는 ${\cal T}$에 존재한다. 그런데 아래가 성립한다. 
\begin{align}
\mbox{claim: } A_{t'} \subset \bigcup_{q \in Q^{\star}} V_q.
\end{align}
따라서 $x \in \bigcup_{q \in Q^{\star}} V_q$ 가 성립한다. 이제 마지막 식이 성립하는 이유를 좀 더 자세히 살펴보자. <br/>
***(proof of claim)***
부분집합의 정의에 의해서 모든 $z \in A_{t'}$에 대하여 $z \in \bigcup_{q\in Q^{\star}} V_q$임을 보이면 증명이 끝난다. 
\begin{align}
\\{y\\} = V \cap A_{t'}
\end{align}
즉 $y$는 집합 $A_{t'}$에서 부터 대표로 $V$에 뽑혀 나간 어떠한 원소이다. 따라서 당연히 $y$는 $A_{t'}$에서 랜덤하게 뽑은 임의의 원소($z$라고 하자)와 동치관계에 있다. 즉 아래가 성립한다. 
\begin{align}
\mbox{for all } z \in A_{t'}, y \sim z 
\end{align}
이말은 아래와 같다. 
\begin{align}
\mbox{for all } z \in A_{t'}, y-z \in \mathbb{Q}
\end{align}
그런데 $y,z$모두 $A_{t'}$의 원소이고 $A_{t'} \subset [0,2\pi)$이므로 $y-z \in (-2\pi,2\pi)$임을 알 수 있다. 따라서 
\begin{align}
\mbox{for all } z \in A_{t'}, y-z \in \mathbb{Q} \cap (-2\pi,2\pi)
\end{align}
라고 쓸 수 있다. 이는 적당한 $q' \in \mathbb{Q} \cap (-2\pi,2\pi)=Q^{\star}$ 가 존재하여 아래식을 성립한다는 말과 같다. 
\begin{align}
\mbox{for all } z \in A_{t'}, y-z = q'
\end{align}
이는 다시 아래식이 성립한다는 것과 같다. 
\begin{align}
\mbox{for all } z \in A_{t'}, z = y-q' , q'\in Q^{\star}
\end{align}
그런데 $y\in V$ 이므로, $\bigcup_{q\in Q^{\star}} V_q$ 중에는 $z$를 포함하는 집합이 하나는 존재한다. 따라서 
\begin{align}
\mbox{for all } z \in A_{t'}, z \in \bigcup_{q\in Q^{\star}} V_q
\end{align}
가 성립한다. 

- FACT 1과 별개로 아래의 사실이 성립한다. 
\begin{align}
\mbox{FACT 2:} (-4\pi,4\pi) \supset \bigcup_{q \in Q^{\star} } V_q.
\end{align}
이는 증명없이 바로 이해할 수 있다. 