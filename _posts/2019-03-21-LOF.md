---
layout: post 
title: (리뷰) LOF
---

### About this document 
- 여기서는 아래의 논문을 요약하였다. <br/>
***REF***: Breunig, M. M., Kriegel, H. P., Ng, R. T., & Sander, J. (2000, May). LOF: identifying density-based local outliers. In ACM sigmod record (Vol. 29, No. 2, pp. 93-104). ACM.

- 위의 논문에서는 **리처빌리티-디스턴스(Reachability Distance)** 라는 개념이 나오는데 이것이 HST에서 제안하는 dissimilarity와 유사하다. 이 논문에서 제시한 anormally detection방법과 우리의 방법을 비교해보면 매우 유익할것이다. 

- 가급적 논문에 나오는 노테이션을 따라갈것이다. (내가 이러한 노테이션을 좋아하는건 아니다. 노테이션이 진짜 거지같다.) 

### 4. Formal definition of local outliers 
- **(Definition 3)** 여기에서는 $k-distance(p)$라는 것을 정의한다. $k-distance(p)$의 의미는 **"점 $p$"와 "$p$로부터 $k$번째로 가까운 점"과의 거리**를 의미한다. $p$와 가장 가까운 점은 자기자신이므로 $k=1$이면 $k-distance(p)=0$이다. 즉 모든 경우에 클리어하게 아래가 정의된다. 
\begin{align}
1-distance(p)=d(p-p)=0
\end{align}
그런데 만약에 점 $p$로부터 $k$번째로 가까운 점이 2개면 정의가 애매해진다. 이때는 그냥 동점자끼리는 같은 거리를 가진다고 생각하고 정의해버린다. 예를 들어보자. 하나의 수직선위에 점 $\\{-1,0,1,2,3,4\\}$가 있다고 하자. 편의상 $p=0$이라고 하자. 일단 언급한바와 같이 아래가 성립한다. 
\begin{align}
1-distance(0)=0
\end{align}
이다. $k=2$인 경우를 살펴보자. 점 $\\{0\\}$과 두번째로 가까운 점은 $\\{-1,1\\}$ 이런경우는 아래와 같이 정의한다. 
\begin{align}
2-distance(0)=3-distance(0)=1
\end{align}
**앞으로는 논의를 빠르게 하고 논문의 이해를 돕기위해서 위와같은 상황은 없다고 가정하자.**

- **(Definition 4)** 여기에서는 **"점 $p$의 $k-distance$ 이웃들"**($k-distance$ neighborhood of $p$)이라는 개념이 나온다. 요거는 기호로 $N_{k-distance(p)}(p)$라고 표현하고 아래와 같이 정의한다.
\begin{align}
N_{k-distance(p)}(p)=\\{q \in D- \\{p\\} | d(p,q) \leq k-distance(p) \\} 
\end{align}
여기에서 $D$는 전체 데이터셋을 의미한다. 쉽게 말하면 **$p$의 $k-distance$ 이웃들** 점 $p$와 가까운 점 $k-1$개를 의미한다. (자기자신을 빼므로 $k$개가 아니라 $k-1$개임).

- **(Definition 5)** 여기에서는 $p$에서 $o$까지의 **리처빌리티-디스턴스(Reachability Distance)** 를 정의한다. **리처빌리티-디스턴스** 는 기호로 $reach-dist_{k}(p,o)$라고 쓰고 아래와 같이 정의한다. 
\begin{align}
reach-dist_{k}(p,o)= \max (k-distance(o) ,d(p-o)) 
\end{align}
$D=\\{-2,-1,0,1,2,3,\dots\\}$라 가정하고 예제를 통하여 몇 가지를 구해보자. 
\begin{align}
reach-dist_{1}(0,-2)=\max (0,2) = 2 
\end{align}
\begin{align}
reach-dist_{2}(0,-2)=\max (1,2) = 2 
\end{align}
\begin{align}
reach-dist_{3}(0,-2)=\max (2,2) = 2 
\end{align}
\begin{align}
...
\end{align}
\begin{align}
reach-dist_{6}(0,-2)=\max (3,2) = 3 
\end{align}
여기에서 $k$는 어떠한 역할을 할까? 극단적으로 생각해서 $k$가 엄청 크다고 하자. 예를 들어서 $k=|D|$라고 하자. 그러면 $reach-dist_{k}(p,o)$의 값은 점 $o$와 가장 멀리 떨어진 점과의 거리로 고정된다. $k$가 엄청작으면 $reach-dist_{k}(p,o)$의 값은 그냥 $p$와 $o$와의 유클리드 거리가 된다. 매우 특이한점은 **점 $o$ 주위에 얼만큼 다른점들이 밀집되어 있느냐에 따라서 $k-distance(o)$의 값이 달라지고 이것은 결국 $reach-dist_{k}(p,o)$가 달라지게 되는 결과를 만든다** 는 것이다. 좀 더 구체적으로 따져보자. $k$를 적당한 자연수로 고정시키자. 점 $o$ 주변에 많은 점들이 밀집되어있다고 하자. 그럼 $k-distance(o)$의 값은 작아질 것이고 $reach-dist_{k}(p,o)$는 단순히 점 $p$와 $o$의 유클리드 거리가 될 것이다. 이제 



- 즉 $k$는 자료들간의 distance를 얼마나 민감하게 랭킹할것인지를 결정한다는 것을 알 수 있다. **리처빌리티-디스턴스** 는 자료간의 랭킹을 아래와 같은 원칙으로 한다. <br/><br/>
*(1) 기준점 ${\bf x}$와 가까이에 있는 점들을 선정한다. 이 점들의 집합을 ${\cal N}_k({\bf x})$라고 한다. 이때 $k$의 의미는 위에서 정의한 것과 같다. 즉 ${\cal N}_({\bf x})$는 ${\bf x}$와 가장 가까운 top3 점들을 모아둔 집합이다. 아무튼 이 그룹에 선정된 점들은 모두 동일한 **리처빌리티-디스턴스**를 얻게 된다. 그 값은 선정된 값들 중에서 가장 ${\bf x}$와 멀리있는 점과 ${\bf x}$의 유클리드 거리이다. <br/>
(2) 위의 단계에서 선택받지 못한 점들은 ${\bf x}$와의 유클리드 거리를 **리처빌리티-디스턴스**로 부여받는다. <br/><br/>*
즉 $k$가 커질수록 자료들을 대충 다 비슷하게 본다는 것이고 $k$가 작을수록 자료들의 거리를 민감하게 랭킹한다는 의미가 된다. 이런 의미에서 $k$는 HST의 $\tau$와 비슷한 느낌을 준다. 저자들은 이 $k$를 Minpts라고 표현한다. 정확한 의미는 모르겠지만 **minimal number of points**의 약자인것 같다. 여기에서는 그냥 계속 $k$라고 표현하겠다. 

- 이제 **로칼-리처빌리티-덴시티(Local Reachability Density)** 에 대하여 알아보자. ${\bf x}$의 **로칼-리처빌리티-덴시티**는 아래와 같이 정의한다. 
\begin{align}
LRD({\bf x},k)=\left(\frac{1}{k} \sum_{i=1}^{k}RD({\bf x},{\bf x}^{(i)},k) \right)^{-1}
\end{align}



### Properties of local outliers 

### The impact of the parameter minpts 

